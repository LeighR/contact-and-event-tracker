<h1>Listing events</h1>

<table class="nice_table tablesorter">
  <thead>
    <tr>
      <th>Event</th>
      <th>Type</th>
      <th>When</th>
      <% if is_admin? %>
      <th colspan="2" style="border: 1px #CCF dashed; text-align:center">Manage</th>
      <% end %>
    </tr>
  </thead>
  <tbody>
  <% @events.each do |event| %>
    <tr>
      <td><%= link_to event.name, event %></td>
      <td><%= event.event_type %></td>
      <td><%= event.start_on %> <%= " - #{event.end_on}" if event.end_on %></td>
      <% if is_admin? %>
      <td><%= link_to 'Edit', edit_event_path(event) %></td>
      <td><%= link_to 'Delete', event, :confirm => "Are you sure you want to permenantly delete the event: #{event.to_s}?", :method => :delete %></td>
      <% end %>
    </tr>
  <% end %>
  </tbody>
</table>

<br />


<% if is_admin? %>
<p>
<%= link_to 'New event', new_event_path %>
</p>
<% end %>

<div id="calendar_now" class="calendars"></div>
<div id="calendar_one_month" class="calendars"></div>
<div id="calendar_two_months" class="calendars"></div>

<script type="text/javascript">
$(document).ready(function()
  {
    $(".nice_table").tablesorter( { widgets: ['zebra'], headers: { 3:{sorter: false}, 4:{sorter: false}, 5:{sorter: false}} });
    
    $('.calendars').fullCalendar({ editable: false, events: "/events", height: 300, aspectRatio: 1.2 });
    $('#calendar_one_month').fullCalendar('next');
    $('#calendar_two_months').fullCalendar('next').fullCalendar('next');
    
  }
);
</script>